def ansible = [:]
         ansible.name = 'ansible'
         ansible.host = '172.31.30.154'
         ansible.user = 'centos'
         ansible.password = 'Rnstech@123'
         ansible.allowAnyHosts = true
pipeline{
     agent { label'BuildServer'}
     tools {
        // Install the Maven version configured as "M3" and add it to the path.
        maven "Maven"
    }
	stages {
	  stage('Prepare the workspace'){
	  
	  steps{
	      // cloning the workspace
		  git credentialsId: 'Github', url: 'https://github.com/gaddam146/Maven-Java-Project.git'
		  stash 'source'
		  }
		  }
		  stage('Tools-Setup') {
		  steps{
		  echo "Ansible-Docker & Sonarqube Installation"
		  sshCommand remote: ansible, command: 'cd Maven-Java-Project'
                  sshCommand remote: ansible, command: 'cd Maven-Java-Project; ansible-playbook -i hosts tools/sonarqube/sonar-install.yaml'
                  sshCommand remote: ansible, command: 'cd Maven-Java-Project; ansible-playbook -i hosts tools/docker/docker-install.yml'
		  }
		  }
		}
		}
